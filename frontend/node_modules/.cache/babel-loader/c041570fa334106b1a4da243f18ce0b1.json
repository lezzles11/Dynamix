{"ast":null,"code":"'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dropdown = exports.dropdownFactory = undefined;\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\nvar _createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _classnames4 = require('classnames');\n\nvar _classnames5 = _interopRequireDefault(_classnames4);\n\nvar _reactCssThemr = require('react-css-themr');\n\nvar _identifiers = require('../identifiers');\n\nvar _Input = require('../input/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _events = require('../utils/events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _objectWithoutProperties(obj, keys) {\n  var target = {};\n\n  for (var i in obj) {\n    if (keys.indexOf(i) >= 0) continue;\n    if (!Object.prototype.hasOwnProperty.call(obj, i)) continue;\n    target[i] = obj[i];\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n/* eslint-disable */\n\n\nvar factory = function factory(Input) {\n  var Dropdown = function (_Component) {\n    _inherits(Dropdown, _Component);\n\n    function Dropdown() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Dropdown);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n        active: false,\n        up: false\n      }, _this.getDocumentEvents = function () {\n        return {\n          click: _this.handleDocumentClick,\n          touchend: _this.handleDocumentClick\n        };\n      }, _this.getSelectedItem = function () {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _this.props.source[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n            if (item[_this.props.valueKey] === _this.props.value) return item;\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return !_this.props.allowBlank ? _this.props.source[0] : undefined;\n      }, _this.handleSelect = function (item, event) {\n        if (_this.props.onBlur) _this.props.onBlur(event);\n\n        if (!_this.props.disabled && _this.props.onChange) {\n          if (_this.props.name) event.target.name = _this.props.name;\n\n          _this.props.onChange(item, event);\n\n          _this.close();\n        }\n      }, _this.handleClick = function (event) {\n        _this.open(event);\n\n        _events2.default.pauseEvent(event);\n\n        if (_this.props.onClick) _this.props.onClick(event);\n      }, _this.handleDocumentClick = function (event) {\n        if (_this.state.active && !_events2.default.targetIsDescendant(event, _reactDom2.default.findDOMNode(_this))) {\n          _this.setState({\n            active: false\n          });\n        }\n      }, _this.close = function () {\n        if (_this.state.active) {\n          _this.setState({\n            active: false\n          });\n        }\n      }, _this.open = function (event) {\n        if (_this.state.active) return;\n        var client = event.target.getBoundingClientRect();\n        var screenHeight = window.innerHeight || document.documentElement.offsetHeight;\n        var up = _this.props.auto ? client.top > screenHeight / 2 + client.height : false;\n\n        _this.setState({\n          active: true,\n          up: up\n        });\n      }, _this.handleFocus = function (event) {\n        event.stopPropagation();\n        if (!_this.props.disabled) _this.open(event);\n        if (_this.props.onFocus) _this.props.onFocus(event);\n      }, _this.handleBlur = function (event) {\n        event.stopPropagation();\n        if (_this.state.active) _this.close();\n        if (_this.props.onBlur) _this.props.onBlur(event);\n      }, _this.renderValue = function (item, idx) {\n        var _classnames;\n\n        var _this$props = _this.props,\n            labelKey = _this$props.labelKey,\n            theme = _this$props.theme,\n            valueKey = _this$props.valueKey;\n        var className = (0, _classnames5.default)((_classnames = {}, _defineProperty(_classnames, theme.selected, item[valueKey] === _this.props.value), _defineProperty(_classnames, theme.disabled, item.disabled), _classnames));\n        return _react2.default.createElement('li', {\n          key: idx,\n          className: className,\n          onMouseDown: !item.disabled && _this.handleSelect.bind(_this, item[valueKey])\n        }, _this.props.template ? _this.props.template(item) : item[labelKey]);\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Dropdown, [{\n      key: 'componentWillUpdate',\n      value: function componentWillUpdate(nextProps, nextState) {\n        if (!this.state.active && nextState.active) {\n          _events2.default.addEventsToDocument(this.getDocumentEvents());\n        }\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps, prevState) {\n        if (prevState.active && !this.state.active) {\n          _events2.default.removeEventsFromDocument(this.getDocumentEvents());\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        if (this.state.active) {\n          _events2.default.removeEventsFromDocument(this.getDocumentEvents());\n        }\n      }\n    }, {\n      key: 'renderTemplateValue',\n      value: function renderTemplateValue(selected) {\n        var _classnames2;\n\n        var theme = this.props.theme;\n        var className = (0, _classnames5.default)(theme.field, (_classnames2 = {}, _defineProperty(_classnames2, theme.errored, this.props.error), _defineProperty(_classnames2, theme.disabled, this.props.disabled), _defineProperty(_classnames2, theme.required, this.props.required), _classnames2));\n        return _react2.default.createElement('div', {\n          className: className,\n          onClick: this.handleClick\n        }, _react2.default.createElement('div', {\n          className: theme.templateValue + ' ' + theme.value\n        }, this.props.template(selected)), this.props.label ? _react2.default.createElement('label', {\n          className: theme.label\n        }, this.props.label, this.props.required ? _react2.default.createElement('span', {\n          className: theme.required\n        }, ' * ') : null) : null, this.props.error ? _react2.default.createElement('span', {\n          className: theme.error\n        }, this.props.error) : null);\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _classnames3;\n\n        var _props = this.props,\n            allowBlank = _props.allowBlank,\n            auto = _props.auto,\n            labelKey = _props.labelKey,\n            required = _props.required,\n            onChange = _props.onChange,\n            onFocus = _props.onFocus,\n            onBlur = _props.onBlur,\n            source = _props.source,\n            template = _props.template,\n            theme = _props.theme,\n            valueKey = _props.valueKey,\n            others = _objectWithoutProperties(_props, ['allowBlank', 'auto', 'labelKey', 'required', 'onChange', 'onFocus', 'onBlur', 'source', 'template', 'theme', 'valueKey']);\n\n        var selected = this.getSelectedItem();\n        var className = (0, _classnames5.default)(theme.dropdown, (_classnames3 = {}, _defineProperty(_classnames3, theme.up, this.state.up), _defineProperty(_classnames3, theme.active, this.state.active), _defineProperty(_classnames3, theme.disabled, this.props.disabled), _defineProperty(_classnames3, theme.required, this.props.required), _classnames3), this.props.className);\n        return _react2.default.createElement('div', {\n          className: className,\n          'data-react-toolbox': 'dropdown',\n          onBlur: this.handleBlur,\n          onFocus: this.handleFocus,\n          tabIndex: '-1'\n        }, _react2.default.createElement(Input, _extends({}, others, {\n          tabIndex: '0',\n          className: theme.value,\n          onClick: this.handleClick,\n          required: this.props.required,\n          readOnly: true,\n          type: template && selected ? 'hidden' : null,\n          theme: theme,\n          themeNamespace: 'input',\n          value: selected && selected[labelKey] ? selected[labelKey] : ''\n        })), template && selected ? this.renderTemplateValue(selected) : null, _react2.default.createElement('ul', {\n          className: theme.values\n        }, source.map(this.renderValue)));\n      }\n    }]);\n\n    return Dropdown;\n  }(_react.Component);\n\n  Dropdown.propTypes = {\n    allowBlank: _propTypes2.default.bool,\n    auto: _propTypes2.default.bool,\n    className: _propTypes2.default.string,\n    disabled: _propTypes2.default.bool,\n    error: _propTypes2.default.string,\n    label: _propTypes2.default.string,\n    labelKey: _propTypes2.default.string,\n    name: _propTypes2.default.string,\n    onBlur: _propTypes2.default.func,\n    onChange: _propTypes2.default.func,\n    onClick: _propTypes2.default.func,\n    onFocus: _propTypes2.default.func,\n    required: _propTypes2.default.bool,\n    source: _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object])).isRequired,\n    template: _propTypes2.default.func,\n    theme: _propTypes2.default.shape({\n      active: _propTypes2.default.string,\n      disabled: _propTypes2.default.string,\n      dropdown: _propTypes2.default.string,\n      error: _propTypes2.default.string,\n      errored: _propTypes2.default.string,\n      field: _propTypes2.default.string,\n      label: _propTypes2.default.string,\n      required: _propTypes2.default.string,\n      selected: _propTypes2.default.string,\n      templateValue: _propTypes2.default.string,\n      up: _propTypes2.default.string,\n      value: _propTypes2.default.string,\n      values: _propTypes2.default.string\n    }),\n    value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n    valueKey: _propTypes2.default.string\n  };\n  Dropdown.defaultProps = {\n    auto: true,\n    className: '',\n    allowBlank: true,\n    disabled: false,\n    labelKey: 'label',\n    required: false,\n    valueKey: 'value'\n  };\n  return Dropdown;\n};\n\nvar Dropdown = factory(_Input2.default);\nexports.default = (0, _reactCssThemr.themr)(_identifiers.DROPDOWN)(Dropdown);\nexports.dropdownFactory = factory;\nexports.Dropdown = Dropdown;","map":{"version":3,"sources":["/Users/lesleycheung/Desktop/agile/frontend/node_modules/react-toolbox/lib/dropdown/Dropdown.js"],"names":["Object","defineProperty","exports","value","Dropdown","dropdownFactory","undefined","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_createClass","defineProperties","props","descriptor","enumerable","configurable","writable","Constructor","protoProps","staticProps","_react","require","_react2","_interopRequireDefault","_propTypes","_propTypes2","_reactDom","_reactDom2","_classnames4","_classnames5","_reactCssThemr","_identifiers","_Input","_Input2","_events","_events2","obj","__esModule","default","_objectWithoutProperties","keys","indexOf","_defineProperty","_classCallCheck","instance","TypeError","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","factory","Input","_Component","_ref","_temp","_this","_ret","_len","args","Array","_key","getPrototypeOf","apply","concat","state","active","up","getDocumentEvents","click","handleDocumentClick","touchend","getSelectedItem","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","Symbol","iterator","_step","next","done","item","valueKey","err","return","allowBlank","handleSelect","event","onBlur","disabled","onChange","name","close","handleClick","open","pauseEvent","onClick","targetIsDescendant","findDOMNode","setState","client","getBoundingClientRect","screenHeight","window","innerHeight","document","documentElement","offsetHeight","auto","top","height","handleFocus","stopPropagation","onFocus","handleBlur","renderValue","idx","_classnames","_this$props","labelKey","theme","className","selected","createElement","onMouseDown","bind","template","componentWillUpdate","nextProps","nextState","addEventsToDocument","componentDidUpdate","prevProps","prevState","removeEventsFromDocument","componentWillUnmount","renderTemplateValue","_classnames2","field","errored","error","required","templateValue","label","render","_classnames3","_props","others","dropdown","tabIndex","readOnly","type","themeNamespace","values","map","Component","propTypes","bool","string","func","arrayOf","oneOfType","object","isRequired","shape","number","defaultProps","themr","DROPDOWN"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Dropdown = exports.dropdownFactory = undefined;\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _react = require('react');\n\nvar _react2 = _interopRequireDefault(_react);\n\nvar _propTypes = require('prop-types');\n\nvar _propTypes2 = _interopRequireDefault(_propTypes);\n\nvar _reactDom = require('react-dom');\n\nvar _reactDom2 = _interopRequireDefault(_reactDom);\n\nvar _classnames4 = require('classnames');\n\nvar _classnames5 = _interopRequireDefault(_classnames4);\n\nvar _reactCssThemr = require('react-css-themr');\n\nvar _identifiers = require('../identifiers');\n\nvar _Input = require('../input/Input');\n\nvar _Input2 = _interopRequireDefault(_Input);\n\nvar _events = require('../utils/events');\n\nvar _events2 = _interopRequireDefault(_events);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _objectWithoutProperties(obj, keys) { var target = {}; for (var i in obj) { if (keys.indexOf(i) >= 0) continue; if (!Object.prototype.hasOwnProperty.call(obj, i)) continue; target[i] = obj[i]; } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; } /* eslint-disable */\n\n\nvar factory = function factory(Input) {\n  var Dropdown = function (_Component) {\n    _inherits(Dropdown, _Component);\n\n    function Dropdown() {\n      var _ref;\n\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, Dropdown);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call.apply(_ref, [this].concat(args))), _this), _this.state = {\n        active: false,\n        up: false\n      }, _this.getDocumentEvents = function () {\n        return {\n          click: _this.handleDocumentClick,\n          touchend: _this.handleDocumentClick\n        };\n      }, _this.getSelectedItem = function () {\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = _this.props.source[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n\n            if (item[_this.props.valueKey] === _this.props.value) return item;\n          }\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        return !_this.props.allowBlank ? _this.props.source[0] : undefined;\n      }, _this.handleSelect = function (item, event) {\n        if (_this.props.onBlur) _this.props.onBlur(event);\n        if (!_this.props.disabled && _this.props.onChange) {\n          if (_this.props.name) event.target.name = _this.props.name;\n          _this.props.onChange(item, event);\n          _this.close();\n        }\n      }, _this.handleClick = function (event) {\n        _this.open(event);\n        _events2.default.pauseEvent(event);\n        if (_this.props.onClick) _this.props.onClick(event);\n      }, _this.handleDocumentClick = function (event) {\n        if (_this.state.active && !_events2.default.targetIsDescendant(event, _reactDom2.default.findDOMNode(_this))) {\n          _this.setState({ active: false });\n        }\n      }, _this.close = function () {\n        if (_this.state.active) {\n          _this.setState({ active: false });\n        }\n      }, _this.open = function (event) {\n        if (_this.state.active) return;\n        var client = event.target.getBoundingClientRect();\n        var screenHeight = window.innerHeight || document.documentElement.offsetHeight;\n        var up = _this.props.auto ? client.top > screenHeight / 2 + client.height : false;\n        _this.setState({ active: true, up: up });\n      }, _this.handleFocus = function (event) {\n        event.stopPropagation();\n        if (!_this.props.disabled) _this.open(event);\n        if (_this.props.onFocus) _this.props.onFocus(event);\n      }, _this.handleBlur = function (event) {\n        event.stopPropagation();\n        if (_this.state.active) _this.close();\n        if (_this.props.onBlur) _this.props.onBlur(event);\n      }, _this.renderValue = function (item, idx) {\n        var _classnames;\n\n        var _this$props = _this.props,\n            labelKey = _this$props.labelKey,\n            theme = _this$props.theme,\n            valueKey = _this$props.valueKey;\n\n        var className = (0, _classnames5.default)((_classnames = {}, _defineProperty(_classnames, theme.selected, item[valueKey] === _this.props.value), _defineProperty(_classnames, theme.disabled, item.disabled), _classnames));\n        return _react2.default.createElement(\n          'li',\n          {\n            key: idx,\n            className: className,\n            onMouseDown: !item.disabled && _this.handleSelect.bind(_this, item[valueKey])\n          },\n          _this.props.template ? _this.props.template(item) : item[labelKey]\n        );\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    _createClass(Dropdown, [{\n      key: 'componentWillUpdate',\n      value: function componentWillUpdate(nextProps, nextState) {\n        if (!this.state.active && nextState.active) {\n          _events2.default.addEventsToDocument(this.getDocumentEvents());\n        }\n      }\n    }, {\n      key: 'componentDidUpdate',\n      value: function componentDidUpdate(prevProps, prevState) {\n        if (prevState.active && !this.state.active) {\n          _events2.default.removeEventsFromDocument(this.getDocumentEvents());\n        }\n      }\n    }, {\n      key: 'componentWillUnmount',\n      value: function componentWillUnmount() {\n        if (this.state.active) {\n          _events2.default.removeEventsFromDocument(this.getDocumentEvents());\n        }\n      }\n    }, {\n      key: 'renderTemplateValue',\n      value: function renderTemplateValue(selected) {\n        var _classnames2;\n\n        var theme = this.props.theme;\n\n        var className = (0, _classnames5.default)(theme.field, (_classnames2 = {}, _defineProperty(_classnames2, theme.errored, this.props.error), _defineProperty(_classnames2, theme.disabled, this.props.disabled), _defineProperty(_classnames2, theme.required, this.props.required), _classnames2));\n\n        return _react2.default.createElement(\n          'div',\n          { className: className, onClick: this.handleClick },\n          _react2.default.createElement(\n            'div',\n            { className: theme.templateValue + ' ' + theme.value },\n            this.props.template(selected)\n          ),\n          this.props.label ? _react2.default.createElement(\n            'label',\n            { className: theme.label },\n            this.props.label,\n            this.props.required ? _react2.default.createElement(\n              'span',\n              { className: theme.required },\n              ' * '\n            ) : null\n          ) : null,\n          this.props.error ? _react2.default.createElement(\n            'span',\n            { className: theme.error },\n            this.props.error\n          ) : null\n        );\n      }\n    }, {\n      key: 'render',\n      value: function render() {\n        var _classnames3;\n\n        var _props = this.props,\n            allowBlank = _props.allowBlank,\n            auto = _props.auto,\n            labelKey = _props.labelKey,\n            required = _props.required,\n            onChange = _props.onChange,\n            onFocus = _props.onFocus,\n            onBlur = _props.onBlur,\n            source = _props.source,\n            template = _props.template,\n            theme = _props.theme,\n            valueKey = _props.valueKey,\n            others = _objectWithoutProperties(_props, ['allowBlank', 'auto', 'labelKey', 'required', 'onChange', 'onFocus', 'onBlur', 'source', 'template', 'theme', 'valueKey']);\n\n        var selected = this.getSelectedItem();\n        var className = (0, _classnames5.default)(theme.dropdown, (_classnames3 = {}, _defineProperty(_classnames3, theme.up, this.state.up), _defineProperty(_classnames3, theme.active, this.state.active), _defineProperty(_classnames3, theme.disabled, this.props.disabled), _defineProperty(_classnames3, theme.required, this.props.required), _classnames3), this.props.className);\n\n        return _react2.default.createElement(\n          'div',\n          {\n            className: className,\n            'data-react-toolbox': 'dropdown',\n            onBlur: this.handleBlur,\n            onFocus: this.handleFocus,\n            tabIndex: '-1'\n          },\n          _react2.default.createElement(Input, _extends({}, others, {\n            tabIndex: '0',\n            className: theme.value,\n            onClick: this.handleClick,\n            required: this.props.required,\n            readOnly: true,\n            type: template && selected ? 'hidden' : null,\n            theme: theme,\n            themeNamespace: 'input',\n            value: selected && selected[labelKey] ? selected[labelKey] : ''\n          })),\n          template && selected ? this.renderTemplateValue(selected) : null,\n          _react2.default.createElement(\n            'ul',\n            { className: theme.values },\n            source.map(this.renderValue)\n          )\n        );\n      }\n    }]);\n\n    return Dropdown;\n  }(_react.Component);\n\n  Dropdown.propTypes = {\n    allowBlank: _propTypes2.default.bool,\n    auto: _propTypes2.default.bool,\n    className: _propTypes2.default.string,\n    disabled: _propTypes2.default.bool,\n    error: _propTypes2.default.string,\n    label: _propTypes2.default.string,\n    labelKey: _propTypes2.default.string,\n    name: _propTypes2.default.string,\n    onBlur: _propTypes2.default.func,\n    onChange: _propTypes2.default.func,\n    onClick: _propTypes2.default.func,\n    onFocus: _propTypes2.default.func,\n    required: _propTypes2.default.bool,\n    source: _propTypes2.default.arrayOf(_propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.object])).isRequired,\n    template: _propTypes2.default.func,\n    theme: _propTypes2.default.shape({\n      active: _propTypes2.default.string,\n      disabled: _propTypes2.default.string,\n      dropdown: _propTypes2.default.string,\n      error: _propTypes2.default.string,\n      errored: _propTypes2.default.string,\n      field: _propTypes2.default.string,\n      label: _propTypes2.default.string,\n      required: _propTypes2.default.string,\n      selected: _propTypes2.default.string,\n      templateValue: _propTypes2.default.string,\n      up: _propTypes2.default.string,\n      value: _propTypes2.default.string,\n      values: _propTypes2.default.string\n    }),\n    value: _propTypes2.default.oneOfType([_propTypes2.default.string, _propTypes2.default.number]),\n    valueKey: _propTypes2.default.string\n  };\n  Dropdown.defaultProps = {\n    auto: true,\n    className: '',\n    allowBlank: true,\n    disabled: false,\n    labelKey: 'label',\n    required: false,\n    valueKey: 'value'\n  };\n\n\n  return Dropdown;\n};\n\nvar Dropdown = factory(_Input2.default);\nexports.default = (0, _reactCssThemr.themr)(_identifiers.DROPDOWN)(Dropdown);\nexports.dropdownFactory = factory;\nexports.Dropdown = Dropdown;"]},"metadata":{},"sourceType":"script"}